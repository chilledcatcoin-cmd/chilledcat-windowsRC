<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Catculator</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(160deg, #1c3d6c, #2b5c99);
    font-family: "MS Sans Serif", sans-serif;
    font-size: 14px;
    color: white;
  }
  #catculator {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0;
    box-sizing: border-box;
    position: relative;
    border: 2px solid #0a1a33;
    background: #dfeeff;
    box-shadow: 3px 3px #0a1a33;
  }

  /* Title bar */
  #titlebar {
    background: #1c3d6c;
    color: #fff;
    padding: 4px 6px;
    font-weight: bold;
    font-size: 13px;
    border-bottom: 2px solid #0a1a33;
  }

  /* Display */
  #display {
    background: #e0f0ff;
    border: 2px inset #0a1a33;
    height: 40px;
    margin: 6px;
    padding: 4px;
    text-align: right;
    font-size: 20px;
    overflow: hidden;
    font-family: "Courier New", monospace;
    color: #000;
  }

  /* Buttons grid */
  #buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 4px;
    flex: 1;
    padding: 6px;
  }
  button {
    background: #cde0ff;
    border: 2px outset #fff;
    font-family: "MS Sans Serif", sans-serif;
    font-size: 14px;
    cursor: pointer;
    height: 40px;
    box-shadow: inset -1px -1px #1c3d6c, inset 1px 1px #fff;
    transition: background 0.2s;
  }
  button:hover {
    background: #e8f4ff;
  }
  button:active {
    border: 2px inset #404040;
    background: #aacdff;
  }
  .wide { grid-column: span 2; }

  /* Easter egg overlay */
  #media-overlay {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0.75);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 5000;
  }
  #media-overlay video,
  #media-overlay img {
    max-width: 90%;
    max-height: 90%;
    border: 4px solid #fff;
    box-shadow: 0 0 25px #000;
    background: #000;
  }
</style>
</head>
<body>
  <div id="catculator">
    <!-- Title bar -->
    <div id="titlebar">üêæ Catculator</div>

    <!-- Display -->
    <div id="display">0</div>

    <!-- Buttons -->
    <div id="buttons">
      <button onclick="press('7')">7</button>
      <button onclick="press('8')">8</button>
      <button onclick="press('9')">9</button>
      <button onclick="press('/')">√∑</button>

      <button onclick="press('4')">4</button>
      <button onclick="press('5')">5</button>
      <button onclick="press('6')">6</button>
      <button onclick="press('*')">√ó</button>

      <button onclick="press('1')">1</button>
      <button onclick="press('2')">2</button>
      <button onclick="press('3')">3</button>
      <button onclick="press('-')">‚àí</button>

      <button class="wide" onclick="press('0')">0</button>
      <button onclick="press('.')">.</button>
      <button onclick="press('+')">+</button>

      <button onclick="clearDisplay()">C</button>
      <button onclick="backspace()">‚å´</button>
      <button class="wide" onclick="calculate()">=</button>
    </div>
  </div>

  <!-- Hidden media overlay -->
  <div id="media-overlay" onclick="closeMedia()">
    <video id="egg-video" controls></video>
    <img id="egg-image" style="display:none;" />
  </div>

<script>
  let current = "0";

  // Map special numbers to secret media files
  const easterEggs = {
    "21": "../media/easter/21.mp4",
    "67": "../media/easter/67.mp4",
    "69": "../media/easter/69.mp4",
    "666": "../media/easter/666.mp4",
    "1337": "../media/easter/1337.mp4",
    "707": "../media/easter/707.mp4",
    "0.1134": "../media/easter/01134.mp4",
    "376006": "../media/easter/376006.mp4",
    "7734": "../media/easter/7734.mp4",
    "338": "../media/easter/338.mp4",
    "388338": "../media/easter/388338.mp4",
    "55378008": "../media/easter/55378008.jpg"
  };

  function updateDisplay() {
    document.getElementById("display").textContent = current;
  }

  function press(key) {
    if (current === "0" && key !== ".") current = "";
    current += key;
    updateDisplay();
  }

  function clearDisplay() {
    current = "0";
    updateDisplay();
  }

  function backspace() {
    current = current.slice(0, -1);
    if (current === "" || current === "-") current = "0";
    updateDisplay();
  }

  function calculate() {
    try {
      current = eval(current.replace(/√∑/g, "/").replace(/√ó/g, "*")).toString();
    } catch {
      current = "Error";
    }

    if (easterEggs[current]) {
      showSecretMedia(easterEggs[current]);
    }

    updateDisplay();
  }

  function showSecretMedia(src) {
    const overlay = document.getElementById("media-overlay");
    const video = document.getElementById("egg-video");
    const img = document.getElementById("egg-image");

    // reset
    video.style.display = "none";
    img.style.display = "none";
    video.pause();
    video.src = "";
    img.src = "";

    if (src.endsWith(".mp4")) {
      video.src = src;
      video.style.display = "block";
      overlay.style.display = "flex";
      video.currentTime = 0;
      video.play();
      video.onended = () => closeMedia();
    } else {
      img.src = src;
      img.style.display = "block";
      overlay.style.display = "flex";
    }
  }

  function closeMedia() {
    const overlay = document.getElementById("media-overlay");
    const video = document.getElementById("egg-video");
    const img = document.getElementById("egg-image");
    video.pause();
    video.src = "";
    img.src = "";
    overlay.style.display = "none";
  }

  // Keyboard support
  document.addEventListener("keydown", (e) => {
    if (!isNaN(e.key)) {
      press(e.key);
    } else if (["+", "-", "*", "/"].includes(e.key)) {
      press(e.key);
    } else if (e.key === "Enter" || e.key === "=") {
      calculate();
    } else if (e.key === "Backspace") {
      backspace();
    } else if (e.key === "Escape") {
      clearDisplay();
    } else if (e.key === ".") {
      press(".");
    }
  });

  updateDisplay();
</script>
</body>
</html>

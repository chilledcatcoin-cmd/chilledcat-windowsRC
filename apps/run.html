<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Run</title>
<style>
  body {
    margin: 0;
    font-family: "MS Sans Serif", sans-serif;
    background: #c0c0c0;
    padding: 10px;
    font-size: 13px;
  }

  .window {
    width: 340px;
    border: 2px solid #808080;
    box-shadow: inset -1px -1px 0 #fff, inset 1px 1px 0 #000;
    background: #c0c0c0;
    padding: 8px;
  }

  .title { font-weight: bold; margin-bottom: 8px; }

  .content {
    border: 2px inset #fff;
    background: white;
    padding: 8px;
    min-height: 80px;
  }

  label { display: block; margin-bottom: 4px; }

  input[type="text"] {
    width: 100%;
    box-sizing: border-box;
    border: 2px inset #fff;
    background: #fff;
    padding: 4px;
    font-family: inherit;
    font-size: 13px;
  }

  .buttons {
    margin-top: 12px;
    display: flex;
    justify-content: flex-end;
    gap: 6px;
  }

  button {
    font-family: inherit;
    font-size: 13px;
    padding: 2px 10px;
    background: #c0c0c0;
    border: 2px outset #fff;
    cursor: pointer;
  }

  button:active { border: 2px inset #fff; }

  footer {
    margin-top: 10px;
    font-size: 11px;
    color: #333;
    text-align: center;
  }
</style>
</head>
<body>
  <div class="window">
    <div class="title">Run</div>
    <div class="content">
      <p>Type the name of a program, folder, document, or internet resource, and Chilled Cat will open it for you.</p>
      <label for="run">Open:</label>
      <input type="text" id="run" placeholder="">
      <div class="buttons">
        <button id="ok-btn">OK</button>
        <button id="cancel-btn">Cancel</button>
        <button>Browse...</button>
      </div>
    </div>
    <footer>
      Chilled Cat Support ¬© 1997‚Äì2025<br>
      ‚ÄúIt‚Äôs not a bug ‚Äî it‚Äôs just napping.‚Äù
    </footer>
  </div>

<script>
const runInput = document.getElementById("run");

const map = {
  "help": "apps/help.html",
  "find": "apps/find.html",
  "chill": "apps/chilled_cat_clicker97.html",
  "paint": "apps/chilled_paint.html",
  "catsweeper": "apps/catsweeper97.html",
  "about": "apps/about.html"
};

const easterEggs = {
  "cat": "üêæ Meow! You found the secret Chilled Cat command!",
  "nap": "üí§ System entering Chill Mode... just kidding üò∏",
  "bonk": "üî® BONK! (That‚Äôs what you get for bad syntax.)",
  "format c:": "üòº Nice try. Chilled Cat doesn‚Äôt self-destruct.",
  "moto": "üèçÔ∏è MOTO detected... revving up engines!",
  "grease bag dan": "üõ†Ô∏è Dan‚Äôs desk still isn‚Äôt ordered.",
  "glasderg": "üòè Access granted to Coolest Cat Admin.",
  "chilledcat": "üò∫ Welcome back to the Chilled Dimension.",
  "42": "ü§ñ The answer to life, the universe, and everything.",
  "sudo": "üêß Sorry, you‚Äôre not root. (You‚Äôre just chill.)",
  "meow": "üò∏ Meow confirmed. Happiness +10%"
};

function executeRun() {
  const cmd = runInput.value.trim().toLowerCase();
  if (!cmd) return;

  console.log("[RUN] Command:", cmd); // ‚úÖ debug confirmation

  if (easterEggs[cmd]) {
    console.log("[RUN] Sending message:", easterEggs[cmd]);
    window.parent.postMessage({ type: "showMessage", text: easterEggs[cmd] }, "*");
    return;
  }

  if (map[cmd]) {
    console.log("[RUN] Opening app:", map[cmd]);
    window.parent.postMessage({ type: "openApp", app: map[cmd] }, "*");
    return;
  }

  window.parent.postMessage({
    type: "showMessage",
    text: "‚ùì Unknown command: " + cmd
  }, "*");
  console.log("[RUN] Unknown command:", cmd);
}

document.getElementById("ok-btn").addEventListener("click", executeRun);
document.getElementById("cancel-btn").addEventListener("click", () => {
  window.parent.postMessage({ type: "closeRun" }, "*");
});
runInput.addEventListener("keydown", e => {
  if (e.key === "Enter") executeRun();
});
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Run</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: transparent;
    font-family: "MS Sans Serif", sans-serif;
    font-size: 13px;
  }

  .dialog {
    background: #bfbfbf;
    width: 300px;
    padding: 10px 12px;
    box-sizing: border-box;
  }

  p {
    margin: 0 0 8px;
  }

  label {
    display: block;
    margin-bottom: 4px;
  }

  .input-row {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .input-row img {
    width: 24px;
    height: 24px;
  }

  input[type="text"] {
    flex: 1;
    border: 2px inset #fff;
    background: #fff;
    padding: 4px;
    font-family: inherit;
    font-size: 13px;
  }

  .buttons {
    display: flex;
    justify-content: flex-end;
    gap: 6px;
    margin-top: 16px;
  }

  button {
    font-family: inherit;
    font-size: 13px;
    padding: 2px 14px;
    background: #bfbfbf;
    border: 2px outset #fff;
    cursor: pointer;
    min-width: 70px;
  }

  button:active {
    border: 2px inset #fff;
  }
</style>
</head>
<body>
  <div class="dialog">
    <p>Type the name of a program, folder, document, or internet resource, and Chilled Cat will open it for you.</p>
    <label for="run">Open:</label>
    <div class="input-row">
      <img src="../media/icons/run.png" alt="">
      <input type="text" id="run">
    </div>

    <div class="buttons">
      <button id="ok-btn">OK</button>
      <button id="cancel-btn">Cancel</button>
    </div>
  </div>

<script>
const runInput = document.getElementById("run");

const map = {
  "help": "apps/help.html",
  "find": "apps/find.html",
  "chill": "apps/chilled_cat_clicker97.html",
  "paint": "apps/chilled_paint.html",
  "catsweeper": "apps/catsweeper97.html",
  "about": "apps/about.html"
};

const easterEggs = {
  "cat": "🐾 Meow! You found the secret Chilled Cat command!",
  "nap": "💤 System entering Chill Mode... just kidding 😸",
  "bonk": "🔨 BONK! (That’s what you get for bad syntax.)",
  "format c:": "😼 Nice try. Chilled Cat doesn’t self-destruct.",
  "moto": "🏍️ MOTO detected... revving up engines!",
  "grease bag dan": "🛠️ Dan’s desk still isn’t ordered.",
  "chilledcat": "😺 Welcome back to the Chilled Dimension.",
  "42": "🤖 The answer to life, the universe, and everything.",
  "sudo": "🐧 Sorry, you’re not root. (You’re just chill.)",
  "meow": "😸 Meow confirmed. Happiness +10%"
};

function executeRun() {
  const cmd = runInput.value.trim().toLowerCase();
  if (!cmd) return;

  if (easterEggs[cmd]) {
    window.parent.postMessage({ type: "showMessage", text: easterEggs[cmd] }, "*");
    return;
  }

  if (map[cmd]) {
    window.parent.postMessage({ type: "openApp", app: map[cmd] }, "*");
    window.parent.postMessage({ type: "closeRun" }, "*");
    return;
  }

  window.parent.postMessage({
    type: "showMessage",
    text: "❓ Unknown command: " + cmd
  }, "*");
}

document.getElementById("ok-btn").addEventListener("click", executeRun);
document.getElementById("cancel-btn").addEventListener("click", () => {
  window.parent.postMessage({ type: "closeRun" }, "*");
});
runInput.addEventListener("keydown", e => { if (e.key === "Enter") executeRun(); });
window.onload = () => runInput.focus();
</script>
</body>
</html>

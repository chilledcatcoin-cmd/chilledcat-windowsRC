<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
  body {
    margin: 0;
    font-family: sans-serif;
    font-size: 14px;
    background: #c0c0c0;
    display: flex;
  }
  .sidebar {
    width: 40px;
    background: #000080;
    color: white;
    writing-mode: vertical-rl;
    text-orientation: mixed;
    text-align: center;
    padding: 10px 0;
    font-weight: bold;
    transform: rotate(180deg); /* flip so it reads bottom → top */
  }
  .menu {
    flex: 1;
    display: flex;
    flex-direction: column;
    position: relative;
  }
  .item {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 4px 8px;
    cursor: default;
    white-space: nowrap;
    position: relative;
  }
  .item img {
    width: 16px;
    height: 16px;
    image-rendering: pixelated;
  }
  .item:hover {
    background: #000080;
    color: white;
  }
  .divider {
    border-top: 1px solid #808080;
    margin: 4px 0;
  }
  /* Submenu */
  .submenu {
    position: absolute;
    left: 100%;
    top: 0;
    background: #c0c0c0;
    border: 2px solid #000;
    display: none;
    flex-direction: column;
    min-width: 160px;
  }
  .item:hover > .submenu {
    display: flex;
  }
</style>
</head>
<body>
  <div class="sidebar">Windows RC</div>
  <div class="menu">
    <div class="item">
      <img src="../media/icons/folder.png"> Programs ▶
      <div class="submenu">
        <div class="item" onclick="openApp('paint')">
          <img src="../media/icons/app_paint.png"> Chilled Paint
        </div>
        <div class="item" onclick="openApp('wordpad')">
          <img src="../media/icons/app_wordpad.png"> WordPad
        </div>
        <div class="item" onclick="openApp('calc')">
          <img src="../media/icons/app_calc.png"> Calculator
        </div>
        <div class="item" onclick="openApp('mines')">
          <img src="../media/icons/app_mines.png"> CatSweeper
        </div>
      </div>
    </div>
    <div class="divider"></div>
    <div class="item" onclick="openPopup('find')">
      <img src="../media/icons/find.png"> Find
    </div>
    <div class="item" onclick="openPopup('settings')">
      <img src="../media/icons/settings.png"> Settings
    </div>
    <div class="item" onclick="openPopup('help')">
      <img src="../media/icons/help.png"> Help
    </div>
    <div class="item" onclick="openPopup('run')">
      <img src="../media/icons/run.png"> Run...
    </div>
    <div class="divider"></div>
    <div class="item" onclick="shutdown()">
      <img src="../media/icons/power.png"> Shut Down...
    </div>
  </div>

<script>
  function sendHeight() {
    window.top.postMessage({ type:'resize-startmenu', height: document.body.scrollHeight }, '*');
  }
  window.onload = sendHeight;

  // Launch app (handled by desktop.html)
  function openApp(id) {
    window.top.postMessage({ type:'open-app', id:id }, '*');
  }

  // Open popup dialogs (Find/Settings/Help/Run)
  function openPopup(id) {
    window.top.postMessage({ type:'open-popup', id:id }, '*');
  }

  // Tell desktop.html to open the shutdown dialog
  function shutdown() {
    window.top.postMessage('open-shutdown-dialog', '*');
  }
</script>
</body>
</html>
